var GAPlugin=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c,s,u=4,d=function(){var e;u<=2&&(e=console).log.apply(e,arguments)},p=Object.prototype,m=p.hasOwnProperty,l=p.toString;"function"==typeof Symbol&&(c=Symbol.prototype.valueOf),"function"==typeof BigInt&&(s=BigInt.prototype.valueOf);var f=function(e){return e!=e},g={boolean:1,number:1,string:1,undefined:1},h=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,y=/^[A-Fa-f0-9]+$/,b={};b.a=b.type=function(t,n){return e(t)===n},b.defined=function(e){return void 0!==e},b.empty=function(e){var t,n=l.call(e);if("[object Array]"===n||"[object Arguments]"===n||"[object String]"===n)return 0===e.length;if("[object Object]"===n){for(t in e)if(m.call(e,t))return!1;return!0}return!e},b.equal=function(e,t){if(e===t)return!0;var n,r=l.call(e);if(r!==l.call(t))return!1;if("[object Object]"===r){for(n in e)if(!b.equal(e[n],t[n])||!(n in t))return!1;for(n in t)if(!b.equal(e[n],t[n])||!(n in e))return!1;return!0}if("[object Array]"===r){if((n=e.length)!==t.length)return!1;for(;n--;)if(!b.equal(e[n],t[n]))return!1;return!0}return"[object Function]"===r?e.prototype===t.prototype:"[object Date]"===r&&e.getTime()===t.getTime()},b.hosted=function(t,n){var r=e(n[t]);return"object"===r?!!n[t]:!g[r]},b.instance=b.instanceof=function(e,t){return e instanceof t},b.nil=b.null=function(e){return null===e},b.undef=b.undefined=function(e){return void 0===e},b.args=b.arguments=function(e){var t="[object Arguments]"===l.call(e),n=!b.array(e)&&b.arraylike(e)&&b.object(e)&&b.fn(e.callee);return t||n},b.array=Array.isArray||function(e){return"[object Array]"===l.call(e)},b.args.empty=function(e){return b.args(e)&&0===e.length},b.array.empty=function(e){return b.array(e)&&0===e.length},b.arraylike=function(e){return!!e&&!b.bool(e)&&m.call(e,"length")&&isFinite(e.length)&&b.number(e.length)&&e.length>=0},b.bool=b.boolean=function(e){return"[object Boolean]"===l.call(e)},b.false=function(e){return b.bool(e)&&!1===Boolean(Number(e))},b.true=function(e){return b.bool(e)&&!0===Boolean(Number(e))},b.date=function(e){return"[object Date]"===l.call(e)},b.date.valid=function(e){return b.date(e)&&!isNaN(Number(e))},b.element=function(e){return void 0!==e&&"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&1===e.nodeType},b.error=function(e){return"[object Error]"===l.call(e)},b.fn=b.function=function(e){if("undefined"!=typeof window&&e===window.alert)return!0;var t=l.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t||"[object AsyncFunction]"===t},b.number=function(e){return"[object Number]"===l.call(e)},b.infinite=function(e){return e===1/0||e===-1/0},b.decimal=function(e){return b.number(e)&&!f(e)&&!b.infinite(e)&&e%1!=0},b.divisibleBy=function(e,t){var n=b.infinite(e),r=b.infinite(t),i=b.number(e)&&!f(e)&&b.number(t)&&!f(t)&&0!==t;return n||r||i&&e%t==0},b.integer=b.int=function(e){return b.number(e)&&!f(e)&&e%1==0},b.maximum=function(e,t){if(f(e))throw new TypeError("NaN is not a valid value");if(!b.arraylike(t))throw new TypeError("second argument must be array-like");for(var n=t.length;--n>=0;)if(e<t[n])return!1;return!0},b.minimum=function(e,t){if(f(e))throw new TypeError("NaN is not a valid value");if(!b.arraylike(t))throw new TypeError("second argument must be array-like");for(var n=t.length;--n>=0;)if(e>t[n])return!1;return!0},b.nan=function(e){return!b.number(e)||e!=e},b.even=function(e){return b.infinite(e)||b.number(e)&&e==e&&e%2==0},b.odd=function(e){return b.infinite(e)||b.number(e)&&e==e&&e%2!=0},b.ge=function(e,t){if(f(e)||f(t))throw new TypeError("NaN is not a valid value");return!b.infinite(e)&&!b.infinite(t)&&e>=t},b.gt=function(e,t){if(f(e)||f(t))throw new TypeError("NaN is not a valid value");return!b.infinite(e)&&!b.infinite(t)&&e>t},b.le=function(e,t){if(f(e)||f(t))throw new TypeError("NaN is not a valid value");return!b.infinite(e)&&!b.infinite(t)&&e<=t},b.lt=function(e,t){if(f(e)||f(t))throw new TypeError("NaN is not a valid value");return!b.infinite(e)&&!b.infinite(t)&&e<t},b.within=function(e,t,n){if(f(e)||f(t)||f(n))throw new TypeError("NaN is not a valid value");if(!b.number(e)||!b.number(t)||!b.number(n))throw new TypeError("all arguments must be numbers");return b.infinite(e)||b.infinite(t)||b.infinite(n)||e>=t&&e<=n},b.object=function(e){return"[object Object]"===l.call(e)},b.primitive=function(t){return!t||!("object"===e(t)||b.object(t)||b.fn(t)||b.array(t))},b.hash=function(e){return b.object(e)&&e.constructor===Object&&!e.nodeType&&!e.setInterval},b.regexp=function(e){return"[object RegExp]"===l.call(e)},b.string=function(e){return"[object String]"===l.call(e)},b.base64=function(e){return b.string(e)&&(!e.length||h.test(e))},b.hex=function(e){return b.string(e)&&(!e.length||y.test(e))},b.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===l.call(t)&&"symbol"===e(c.call(t))},b.bigint=function(e){return"function"==typeof BigInt&&"[object BigInt]"===l.call(e)&&"bigint"==typeof s.call(e)};var v,w=b,k=Object.prototype.toString,E=function(t){switch(k.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return null===t?"null":void 0===t?"undefined":t&&1===t.nodeType?"element":t===Object(t)?"object":e(t)},A=/\b(Array|Date|Object|Math|JSON)\b/g,j=function(e,t){var n=function(e){for(var t=[],n=0;n<e.length;n++)~t.indexOf(e[n])||t.push(e[n]);return t}(function(e){return e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(A,"").match(/[a-zA-Z_]\w*/g)||[]}(e));return t&&"string"==typeof t&&(t=function(e){return function(t){return e+t}}(t)),t?function(e,t,n){return e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,(function(e){return"("==e[e.length-1]||~t.indexOf(e)?n(e):e}))}(e,n,t):n};try{v=j}catch(e){v=j}var O=P;function P(t){switch({}.toString.call(t)){case"[object Object]":return function(t){var n={};for(var r in t)n[r]="string"==typeof t[r]?C(t[r]):P(t[r]);return function(t){if("object"!==e(t))return!1;for(var r in n){if(!(r in t))return!1;if(!n[r](t[r]))return!1}return!0}}(t);case"[object Function]":return t;case"[object String]":return/^ *\W+/.test(r=t)?new Function("_","return _ "+r):new Function("_","return "+function(e){var t,n,r,i=v(e);if(!i.length)return"_."+e;for(n=0;n<i.length;n++)r=i[n],e=S(r,e,t="('function' == typeof "+(t="_."+r)+" ? "+t+"() : "+t+")");return e}(r));case"[object RegExp]":return n=t,function(e){return n.test(e)};default:return C(t)}var n,r}function C(e){return function(t){return e===t}}function S(e,t,n){return t.replace(new RegExp("(\\.)?"+e,"g"),(function(e,t){return t?e:n}))}try{var I=E}catch(e){I=E}var T=Object.prototype.hasOwnProperty,N=function(e,t,n){switch(t=O(t),n=n||this,I(e)){case"array":return G(e,t,n);case"object":return"number"==typeof e.length?G(e,t,n):function(e,t,n){for(var r in e)T.call(e,r)&&t.call(n,r,e[r])}(e,t,n);case"string":return function(e,t,n){for(var r=0;r<e.length;++r)t.call(n,e.charAt(r),r)}(e,t,n)}};function G(e,t,n){for(var r=0;r<e.length;++r)t.call(n,e[r],r)}function _(t,n){return n=n||M,"array"==function(t){switch(toString.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===t?"null":void 0===t?"undefined":t===Object(t)?"object":e(t)}(t)?D(t,n):x(t,n)}var D=function(e,t){for(var n=[],r=0;r<e.length;++r)t(e[r],r)||(n[n.length]=e[r]);return n},x=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&!t(e[r],r)&&(n[r]=e[r]);return n};function M(e){return null==e}return function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trackingID=t.trackingID,this.sendUserId=t.sendUserId||!1,this.dimensions=t.dimensions||[],this.metrics=t.metrics||[],this.contentGroupings=t.contentGroupings||[],this.nonInteraction=t.nonInteraction||!1,this.anonymizeIp=t.anonymizeIp||!1,this.useGoogleAmpClientId=t.useGoogleAmpClientId||!1,this.domain=t.domain||"auto",this.doubleClick=t.doubleClick||!1,this.enhancedEcommerce=t.enhancedEcommerce||!1,this.enhancedLinkAttribution=t.enhancedLinkAttribution||!1,this.includeSearch=t.includeSearch||!1,this.setAllMappedProps=t.setAllMappedProps||!0,this.siteSpeedSampleRate=t.siteSpeedSampleRate||1,this.sampleRate=t.sampleRate||100,this.trackCategorizedPages=t.trackCategorizedPages||!0,this.trackNamedPages=t.trackNamedPages||!0,this.optimizeContainerId=t.optimize||"",this.resetCustomDimensionsOnPage=t.resetCustomDimensionsOnPage||[],this.enhancedEcommerceLoaded=0,this.name="GA",this.eventWithCategoryFieldProductScoped=["product clicked","product added","product viewed","product removed"]}var n,r,a;return n=e,(r=[{key:"loadScript",value:function(){!function(e,t){d("in script loader=== ".concat(e));var n=document.createElement("script");n.src=t,n.async=!1,n.type="text/javascript",n.id=e;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}("google-analytics","https://www.google-analytics.com/analytics.js")}},{key:"init",value:function(){var t,n=this;this.pageCalled=!1,this.dimensionsArray={},this.dimensions.forEach((function(e){e.to.startsWith("dimension")?n.dimensionsArray[e.from]=e.to:(t=e.to.replace(/cd/g,"dimension"),n.dimensionsArray[e.from]=t)})),this.metricsArray={},this.metrics.forEach((function(e){e.to.startsWith("dimension")?n.metricsArray[e.from]=e.to:(t=e.to.replace(/cm/g,"metric"),n.metricsArray[e.from]=t)})),this.contentGroupingsArray={},this.contentGroupings.forEach((function(e){n.contentGroupingsArray[e.from]=e.to})),window.GoogleAnalyticsObject="ga",window.ga=window.ga||function(){window.ga.q=window.ga.q||[],window.ga.q.push(arguments)},window.ga.l=(new Date).getTime(),this.loadScript();var r={cookieDomain:this.domain||e.prototype.defaults.domain,siteSpeedSampleRate:this.siteSpeedSampleRate,sampleRate:this.sampleRate,allowLinker:!0,useAmpClientId:this.useGoogleAmpClientId};window.ga("create",this.trackingID,r),this.optimizeContainerId&&window.ga("require",this.optimizeContainerId),this.ecommerce||(window.ga("require","ecommerce"),this.ecommerce=!0),this.doubleClick&&window.ga("require","displayfeatures"),this.enhancedLinkAttribution&&window.ga("require","linkid"),this.anonymizeIp&&window.ga("set","anonymizeIp",!0),d("===in init GA===")}},{key:"identify",value:function(e){this.sendUserId&&e.message.userId&&window.ga("set","userId",e.message.userId);var t=this.metricsFunction(e.message.context.traits,this.dimensionsArray,this.metricsArray,this.contentGroupingsArray);Object.keys(t).length&&window.ga("set",t),d("in GoogleAnalyticsManager identify")}},{key:"track",value:function(e){var t,n,r,o,a=this,c=e.message,s=c.event,u=c.properties,p=c.name,m=this.extractCheckoutOptions(e),l=e.message.properties,f=u.products,g=u.total,h={},y=e.message.properties.category,b=u.order_id,v=s||p||"",w=e.message.properties.label,k="",E=e.message.context.campaign;if("Order Completed"!==s||this.enhancedEcommerce)if(this.enhancedEcommerce)switch(s){case"Checkout Started":case"Checkout Step Viewed":case"Order Updated":this.loadEnhancedEcommerce(e),N(f,(function(t){var n=a.createProductTrack(e,t);n={message:n},a.enhancedEcommerceTrackProduct(n)})),window.ga("ec:setAction","checkout",{step:u.step||1,option:m||void 0}),this.pushEnhancedEcommerce(e);break;case"Checkout Step Completed":if(!l.step)return void d("step not present events are not sent to GA");n={step:l.step||1,option:m||void 0},this.loadEnhancedEcommerce(e),window.ga("ec:setAction","checkout_option",n),window.ga("send","event","Checkout","Option");break;case"Order Completed":if(g=e.message.properties.total||e.message.properties.revenue||0,!b)return void d("order_id not present events are not sent to GA");this.loadEnhancedEcommerce(e),N(f,(function(t){var n=a.createProductTrack(e,t);n={message:n},a.enhancedEcommerceTrackProduct(n)})),window.ga("ec:setAction","purchase",{id:b,affiliation:l.affiliation,revenue:g,tax:l.tax,shipping:l.shipping,coupon:l.coupon}),this.pushEnhancedEcommerce(e);break;case"Order Refunded":if(!b)return void d("order_id not present events are not sent to GA");this.loadEnhancedEcommerce(e),N(f,(function(e){var t={properties:e};window.ga("ec:addProduct",{id:t.properties.product_id||t.properties.id||t.properties.sku,quantity:t.properties.quantity})})),window.ga("ec:setAction","refund",{id:b}),this.pushEnhancedEcommerce(e);break;case"Product Added":this.loadEnhancedEcommerce(e),this.enhancedEcommerceTrackProductAction(e,"add",null),this.pushEnhancedEcommerce(e);break;case"Product Removed":this.loadEnhancedEcommerce(e),this.enhancedEcommerceTrackProductAction(e,"remove",null),this.pushEnhancedEcommerce(e);break;case"Product Viewed":this.loadEnhancedEcommerce(e),l.list&&(h.list=l.list),this.enhancedEcommerceTrackProductAction(e,"detail",h),this.pushEnhancedEcommerce(e);break;case"Product Clicked":this.loadEnhancedEcommerce(e),l.list&&(h.list=l.list),this.enhancedEcommerceTrackProductAction(e,"click",h),this.pushEnhancedEcommerce(e);break;case"Promotion Viewed":this.loadEnhancedEcommerce(e),window.ga("ec:addPromo",{id:l.promotion_id||l.id,name:l.name,creative:l.creative,position:l.position}),this.pushEnhancedEcommerce(e);break;case"Promotion Clicked":this.loadEnhancedEcommerce(e),window.ga("ec:addPromo",{id:l.promotion_id||l.id,name:l.name,creative:l.creative,position:l.position}),window.ga("ec:setAction","promo_click",{}),this.pushEnhancedEcommerce(e);break;case"Product List Viewed":this.loadEnhancedEcommerce(e),N(f,(function(e){var t={properties:e};if(t.properties.product_id||t.properties.sku||t.properties.name){var n={id:t.properties.product_id||t.properties.sku,name:t.properties.name,category:t.properties.category||l.category,list:l.list_id||l.category||"products",brand:t.properties.band,variant:t.properties.variant,price:t.properties.price,position:a.getProductPosition(t,f)};n=i(i({},n),a.metricsFunction(t.properties,a.dimensionsArray,a.metricsArray,a.contentGroupingsArray)),Object.keys(n).forEach((function(e){void 0===n[e]&&delete n[e]})),window.ga("ec:addImpression",n)}else d("product_id/sku/name of product not present events are not sent to GA")})),this.pushEnhancedEcommerce(e);break;case"Product List Filtered":l.filters=l.filters||[],l.sorters=l.sorters||[],r=l.filters.map((function(e){return"".concat(e.type,":").concat(e.value)})).join(),o=l.sorters.map((function(e){return"".concat(e.type,":").concat(e.value)})).join(),this.loadEnhancedEcommerce(e),N(f,(function(e){var t={properties:e};if(t.properties.product_id||t.properties.sku||t.properties.name){var n={id:t.properties.product_id||t.sku,name:t.name,category:t.category||l.category,list:l.list_id||l.category||"search results",brand:l.brand,variant:"".concat(r,"::").concat(o),price:t.price,position:a.getProductPosition(t,f)};n=i({impressionObj:n},a.metricsFunction(t.properties,a.dimensionsArray,a.metricsArray,a.contentGroupingsArray)),Object.keys(n).forEach((function(e){void 0===n[e]&&delete n[e]})),window.ga("ec:addImpression",n)}else d("product_id/sku/name of product not present events are not sent to GA")})),this.pushEnhancedEcommerce(e);break;default:e.message.properties&&(k=e.message.properties.value?e.message.properties.value:e.message.properties.revenue),t={eventCategory:y||"All",eventAction:v,eventLabel:w,eventValue:this.formatValue(k),nonInteraction:void 0!==e.message.properties.nonInteraction?!!e.message.properties.nonInteraction:!!this.nonInteraction},E&&(E.name&&(t.campaignName=E.name),E.source&&(t.campaignSource=E.source),E.medium&&(t.campaignMedium=E.medium),E.content&&(t.campaignContent=E.content),E.term&&(t.campaignKeyword=E.term)),t=i({payload:t},this.setCustomDimenionsAndMetrics(e.message.properties)),window.ga("send","event",t.payload),d("in GoogleAnalyticsManager track")}else e.message.properties&&(k=e.message.properties.value?e.message.properties.value:e.message.properties.revenue),t={eventCategory:y||"All",eventAction:v,eventLabel:w,eventValue:this.formatValue(k),nonInteraction:void 0!==e.message.properties.nonInteraction?!!e.message.properties.nonInteraction:!!this.nonInteraction},E&&(E.name&&(t.campaignName=E.name),E.source&&(t.campaignSource=E.source),E.medium&&(t.campaignMedium=E.medium),E.content&&(t.campaignContent=E.content),E.term&&(t.campaignKeyword=E.term)),t=i({payload:t},this.setCustomDimenionsAndMetrics(e.message.properties)),window.ga("send","event",t.payload),d("in GoogleAnalyticsManager track");else{if(!b)return void d("order_id not present events are not sent to GA");window.ga("ecommerce:addTransaction",{affiliation:u.affiliation,shipping:u.shipping,revenue:g,tax:u.tax,id:b,currency:u.currency}),f.forEach((function(t){var n=a.createProductTrack(e,t);window.ga("ecommerce:addItem",{category:n.properties.category,quantity:n.properties.quantity,price:n.properties.price,name:n.properties.name,sku:n.properties.sku,id:b,currency:n.properties.currency})})),window.ga("ecommerce:send")}}},{key:"page",value:function(e){d("in GoogleAnalyticsManager page");var t,n=e.message.properties.category,r=e.message.properties;t=e.message.properties.category&&e.message.name?"".concat(e.message.properties.category," ").concat(e.message.name):e.message.properties.category||e.message.name?e.message.name||e.message.properties.category:"";var o,a=e.message.context.campaign||{},c={},s=this.path(r,this.includeSearch),u=e.message.properties.referrer||"";o=e.message.properties.category||e.message.name?e.message.properties.category?e.message.name?t:e.message.properties.category:e.message.name:r.title,c.page=s,c.title=o,c.location=r.url,a&&(a.name&&(c.campaignName=a.name),a.source&&(c.campaignSource=a.source),a.medium&&(c.campaignMedium=a.medium),a.content&&(c.campaignContent=a.content),a.term&&(c.campaignKeyword=a.term));for(var p={},m=0;m<this.resetCustomDimensionsOnPage.length;m+=1){var l=this.resetCustomDimensionsOnPage[m].resetCustomDimensionsOnPage;this.dimensionsArray[l]&&(p[this.dimensionsArray[l]]=null)}window.ga("set",p),c=i(i({},c),this.setCustomDimenionsAndMetrics(r));var f={page:s,title:o};d(u),d(document.referrer),u!==document.referrer&&(f.referrer=u),window.ga("set",f),this.pageCalled&&delete c.location,window.ga("send","pageview",c),n&&this.trackCategorizedPages&&this.track(e,{nonInteraction:1}),t&&this.trackNamedPages&&this.track(e,{nonInteraction:1}),this.pageCalled=!0}},{key:"isLoaded",value:function(){return d("in GA isLoaded"),!!window.gaplugins}},{key:"isReady",value:function(){return!!window.gaplugins}},{key:"metricsFunction",value:function(e,t,n,r){var i={};return N([n,t,r],(function(t){N(t,(function(t,n){var r=e[t];w.boolean(r)&&(r=r.toString()),(r||0===r)&&(i[n]=r)}))})),i}},{key:"formatValue",value:function(e){return!e||e<0?0:Math.round(e)}},{key:"setCustomDimenionsAndMetrics",value:function(e){var t={},n=this.metricsFunction(e,this.dimensionsArray,this.metricsArray,this.contentGroupingsArray);return Object.keys(n).length&&(this.setAllMappedProps?window.ga("set",n):Object.keys(n).forEach((function(e){t[e]=n[e]}))),t}},{key:"path",value:function(e,t){var n=e.path;return e&&t&&e.search&&(n+=e.search),n}},{key:"createProductTrack",value:function(e,t){var n=t||{};return n.currency=t.currency||e.message.properties.currency,{properties:n}}},{key:"loadEnhancedEcommerce",value:function(e){0===this.enhancedEcommerceLoaded&&(window.ga("require","ec"),this.enhancedEcommerceLoaded=1),window.ga("set","&cu",e.message.properties.currency)}},{key:"enhancedEcommerceTrackProduct",value:function(e){var t=e.message.properties,n={id:t.product_id||t.id||t.sku,name:t.name,category:t.category,quantity:t.quantity,price:t.price,brand:t.brand,variant:t.variant,currency:t.currency};null!=t.position&&(n.position=Math.round(t.position));var r=t.coupon;r&&(n.coupon=r),n=i(i({},n),this.metricsFunction(t,this.dimensionsArray,this.metricsArray,this.contentGroupingsArray)),window.ga("ec:addProduct",n)}},{key:"enhancedEcommerceTrackProductAction",value:function(e,t,n){this.enhancedEcommerceTrackProduct(e),window.ga("ec:setAction",t,n||{})}},{key:"pushEnhancedEcommerce",value:function(e){var t,n=_(["send","event",e.message.properties.category||"EnhancedEcommerce",e.message.event||"Action not defined",e.message.properties.label,i({nonInteraction:1},this.setCustomDimenionsAndMetrics(e.message.properties))]),r=e.message.event;r=r.toLowerCase(),this.eventWithCategoryFieldProductScoped.includes(r)&&(n[2]="EnhancedEcommerce"),(t=window.ga).call.apply(t,[window].concat(o(n)))}},{key:"getProductPosition",value:function(e,t){var n=e.properties.position;return void 0!==n&&!Number.isNaN(Number(n))&&Number(n)>-1?n:t.map((function(e){return e.product_id})).indexOf(e.properties.product_id)+1}},{key:"extractCheckoutOptions",value:function(e){var t=_([e.message.properties.paymentMethod,e.message.properties.shippingMethod]);return t.length>0?t.join(", "):null}}])&&t(n.prototype,r),a&&t(n,a),e}()}();
//# sourceMappingURL=GAPlugin.js.map
